var QRCode=function(){var e=[null,[[10,7,17,13],[1,1,1,1],[]],[[16,10,28,22],[1,1,1,1],[4,16]],[[26,15,22,18],[1,1,2,2],[4,20]],[[18,20,16,26],[2,1,4,2],[4,24]],[[24,26,22,18],[2,1,4,4],[4,28]],[[16,18,28,24],[4,2,4,4],[4,32]],[[18,20,26,18],[4,2,5,6],[4,20,36]],[[22,24,26,22],[4,2,6,6],[4,22,40]],[[22,30,24,20],[5,2,8,8],[4,24,44]],[[26,18,28,24],[5,4,8,8],[4,26,48]],[[30,20,24,28],[5,4,11,8],[4,28,52]],[[22,24,28,26],[8,4,11,10],[4,30,56]],[[22,26,22,24],[9,4,16,12],[4,32,60]],[[24,30,24,20],[9,4,16,16],[4,24,44,64]],[[24,22,24,30],[10,6,18,12],[4,24,46,68]],[[28,24,30,24],[10,6,16,17],[4,24,48,72]],[[28,28,28,28],[11,6,19,16],[4,28,52,76]],[[26,30,28,28],[13,6,21,18],[4,28,54,80]],[[26,28,26,26],[14,7,25,21],[4,28,56,84]],[[26,28,28,30],[16,8,25,20],[4,32,60,88]],[[26,28,30,28],[17,8,25,23],[4,26,48,70,92]],[[28,28,24,30],[17,9,34,23],[4,24,48,72,96]],[[28,30,30,30],[18,9,30,25],[4,28,52,76,100]],[[28,30,30,30],[20,10,32,27],[4,26,52,78,104]],[[28,26,30,30],[21,12,35,29],[4,30,56,82,108]],[[28,28,30,28],[23,12,37,34],[4,28,56,84,112]],[[28,30,30,30],[25,12,40,34],[4,32,60,88,116]],[[28,30,30,30],[26,13,42,35],[4,24,48,72,96,120]],[[28,30,30,30],[28,14,45,38],[4,28,52,76,100,124]],[[28,30,30,30],[29,15,48,40],[4,24,50,76,102,128]],[[28,30,30,30],[31,16,51,43],[4,28,54,80,106,132]],[[28,30,30,30],[33,17,54,45],[4,32,58,84,110,136]],[[28,30,30,30],[35,18,57,48],[4,28,56,84,112,140]],[[28,30,30,30],[37,19,60,51],[4,32,60,88,116,144]],[[28,30,30,30],[38,19,63,53],[4,28,52,76,100,124,148]],[[28,30,30,30],[40,20,66,56],[4,22,48,74,100,126,152]],[[28,30,30,30],[43,21,70,59],[4,26,52,78,104,130,156]],[[28,30,30,30],[45,22,74,62],[4,30,56,82,108,134,160]],[[28,30,30,30],[47,24,77,65],[4,24,52,80,108,136,164]],[[28,30,30,30],[49,25,81,68],[4,28,56,84,112,140,168]]];var t=0;var n=1,r=2,i=4,s=8;var o=/^\d*$/;var u=/^[A-Za-z0-9 $%*+\-./:]*$/;var a=/^[A-Z0-9 $%*+\-./:]*$/;var f=1,l=0,c=3,h=2;var p=[],d=[-1];for(var v=0,m=1;v<255;++v){p.push(m);d[m]=v;m=m*2^(m>=128?285:0)}var g=[[]];for(var v=0;v<30;++v){var y=g[v],b=[];for(var w=0;w<=v;++w){var E=w<v?p[y[w]]:0;var S=p[(v+(y[w-1]||0))%255];b.push(d[E^S])}g.push(b)}var x={};for(var v=0;v<45;++v){x["0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".charAt(v)]=v}var T=[function(e,t){return(e+t)%2==0},function(e,t){return e%2==0},function(e,t){return t%3==0},function(e,t){return(e+t)%3==0},function(e,t){return((e/2|0)+(t/3|0))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return((e+t)%2+e*t%3)%2==0}];var N=function(e){return e>6};var C=function(e){return 4*e+17};var k=function(t){var n=e[t];var r=16*t*t+128*t+64;if(N(t))r-=36;if(n[2].length){r-=25*n[2].length*n[2].length-10*n[2].length-55}return r};var L=function(t,n){var r=k(t)&~7;var i=e[t];r-=8*i[0][n]*i[1][n];return r};var A=function(e,t){switch(t){case n:return e<10?10:e<27?12:14;case r:return e<10?9:e<27?11:13;case i:return e<10?8:16;case s:return e<10?8:e<27?10:12}};var O=function(e,t,o){var u=L(e,o)-4-A(e,t);switch(t){case n:return(u/10|0)*3+(u%10<4?0:u%10<7?1:2);case r:return(u/11|0)*2+(u%11<6?0:1);case i:return u/8|0;case s:return u/13|0}};var M=function(e,t){switch(e){case n:if(!t.match(o))return null;return t;case r:if(!t.match(u))return null;return t.toUpperCase();case i:if(typeof t==="string"){var s=[];for(var a=0;a<t.length;++a){var f=t.charCodeAt(a);if(f<128){s.push(f)}else if(f<2048){s.push(192|f>>6,128|f&63)}else if(f<65536){s.push(224|f>>12,128|f>>6&63,128|f&63)}else{s.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|f&63)}}return s}else{return t}}};var _=function(e,s,o,u){var a=[];var f=0,l=8;var c=o.length;var h=function(e,t){if(t>=l){a.push(f|e>>(t-=l));while(t>=8)a.push(e>>(t-=8)&255);f=0;l=8}if(t>0)f|=(e&(1<<t)-1)<<(l-=t)};var p=A(e,s);h(s,4);h(c,p);switch(s){case n:for(var d=2;d<c;d+=3){h(parseInt(o.substring(d-2,d+1),10),10)}h(parseInt(o.substring(d-2),10),[0,4,7][c%3]);break;case r:for(var d=1;d<c;d+=2){h(x[o.charAt(d-1)]*45+x[o.charAt(d)],11)}if(c%2==1){h(x[o.charAt(d-1)],6)}break;case i:for(var d=0;d<c;++d){h(o[d],8)}break}h(t,4);if(l<8)a.push(f);while(a.length+1<u)a.push(236,17);if(a.length<u)a.push(236);return a};var D=function(e,t){var n=e.slice(0);var r=e.length,i=t.length;for(var s=0;s<i;++s)n.push(0);for(var s=0;s<r;){var o=d[n[s++]];if(o>=0){for(var u=0;u<i;++u){n[s+u]^=p[(o+t[u])%255]}}}return n.slice(r)};var P=function(e,t,n){var r=[];var i=e.length/t|0,s=0;var o=t-e.length%t;for(var u=0;u<o;++u){r.push(s);s+=i}for(var u=o;u<t;++u){r.push(s);s+=i+1}r.push(s);var a=[];for(var u=0;u<t;++u){a.push(D(e.slice(r[u],r[u+1]),n))}var f=[];var l=e.length/t|0;for(var u=0;u<l;++u){for(var c=0;c<t;++c){f.push(e[r[c]+u])}}for(var c=o;c<t;++c){f.push(e[r[c+1]-1])}for(var u=0;u<n.length;++u){for(var c=0;c<t;++c){f.push(a[c][u])}}return f};var H=function(e,t,n,r){var i=e<<r;for(var s=t-1;s>=0;--s){if(i>>r+s&1)i^=n<<s}return e<<r|i};var B=function(t){var n=e[t],r=C(t);var i=[],s=[];for(var o=0;o<r;++o){i.push([]);s.push([])}var u=function(e,t,n,r,o){for(var u=0;u<n;++u){for(var a=0;a<r;++a){i[e+u][t+a]=o[u]>>a&1;s[e+u][t+a]=1}}};u(0,0,9,9,[127,65,93,93,93,65,383,0,64]);u(r-8,0,8,9,[256,127,65,93,93,93,65,127]);u(0,r-8,9,8,[254,130,186,186,186,130,254,0,0]);for(var o=9;o<r-8;++o){i[6][o]=i[o][6]=~o&1;s[6][o]=s[o][6]=1}var a=n[2],f=a.length;for(var o=0;o<f;++o){var l=o==0||o==f-1?1:0,c=o==0?f-1:f;for(var h=l;h<c;++h){u(a[o],a[h],5,5,[31,17,21,17,31])}}if(N(t)){var p=H(t,6,7973,12);var d=0;for(var o=0;o<6;++o){for(var h=0;h<3;++h){i[o][r-11+h]=i[r-11+h][o]=p>>d++&1;s[o][r-11+h]=s[r-11+h][o]=1}}}return{matrix:i,reserved:s}};var j=function(e,t,n){var r=e.length;var i=0,s=-1;for(var o=r-1;o>=0;o-=2){if(o==6)--o;var u=s<0?r-1:0;for(var a=0;a<r;++a){for(var f=o;f>o-2;--f){if(!t[u][f]){e[u][f]=n[i>>3]>>(~i&7)&1;++i}}u+=s}s=-s}return e};var F=function(e,t,n){var r=T[n];var i=e.length;for(var s=0;s<i;++s){for(var o=0;o<i;++o){if(!t[s][o])e[s][o]^=r(s,o)}}return e};var I=function(e,t,n,r){var i=e.length;var s=H(n<<3|r,5,1335,10)^21522;for(var o=0;o<15;++o){var u=[0,1,2,3,4,5,7,8,i-7,i-6,i-5,i-4,i-3,i-2,i-1][o];var a=[i-1,i-2,i-3,i-4,i-5,i-6,i-7,i-8,7,5,4,3,2,1,0][o];e[u][8]=e[8][a]=s>>o&1}return e};var q=function(e){var t=3;var n=3;var r=40;var i=10;var s=function(e){var n=0;for(var i=0;i<e.length;++i){if(e[i]>=5)n+=t+(e[i]-5)}for(var i=5;i<e.length;i+=2){var s=e[i];if(e[i-1]==s&&e[i-2]==3*s&&e[i-3]==s&&e[i-4]==s&&(e[i-5]>=4*s||e[i+1]>=4*s)){n+=r}}return n};var o=e.length;var u=0,a=0;for(var f=0;f<o;++f){var l=e[f];var c;c=[0];for(var h=0;h<o;){var p;for(p=0;h<o&&l[h];++p)++h;c.push(p);for(p=0;h<o&&!l[h];++p)++h;c.push(p)}u+=s(c);c=[0];for(var h=0;h<o;){var p;for(p=0;h<o&&e[h][f];++p)++h;c.push(p);for(p=0;h<o&&!e[h][f];++p)++h;c.push(p)}u+=s(c);var d=e[f+1]||[];a+=l[0];for(var h=1;h<o;++h){var v=l[h];a+=v;if(l[h-1]==v&&d[h]===v&&d[h-1]===v){u+=n}}}u+=i*(Math.abs(a/o/o-.5)/.05|0);return u};var R=function(t,n,r,i,s){var o=e[n];var u=_(n,r,t,L(n,i)>>3);u=P(u,o[1][i],g[o[0][i]]);var a=B(n);var f=a.matrix,l=a.reserved;j(f,l,u);if(s<0){F(f,l,0);I(f,l,i,0);var c=0,h=q(f);F(f,l,0);for(s=1;s<8;++s){F(f,l,s);I(f,l,i,s);var p=q(f);if(h>p){h=p;c=s}F(f,l,s)}s=c}F(f,l,s);I(f,l,i,s);return f};var U={generate:function(e,t){var s={numeric:n,alphanumeric:r,octet:i};var u={L:f,M:l,Q:c,H:h};t=t||{};var p=t.version||-1;var d=u[(t.ecclevel||"L").toUpperCase()];var v=t.mode?s[t.mode.toLowerCase()]:-1;var m="mask"in t?t.mask:-1;if(v<0){if(typeof e==="string"){if(e.match(o)){v=n}else if(e.match(a)){v=r}else{v=i}}else{v=i}}else if(!(v==n||v==r||v==i)){throw"invalid or unsupported mode"}e=M(v,e);if(e===null)throw"invalid data format";if(d<0||d>3)throw"invalid ECC level";if(p<0){for(p=1;p<=40;++p){if(e.length<=O(p,v,d))break}if(p>40)throw"too large data"}else if(p<1||p>40){throw"invalid version"}if(m!=-1&&(m<0||m>8))throw"invalid mask";return R(e,p,v,d,m)},generateHTML:function(e,t){t=t||{};var n=U["generate"](e,t);var r=Math.max(t.modulesize||5,.5);var i=Math.max(t.margin||4,0);var s=document.createElement("div");var o=n.length;var u=['<table border="0" cellspacing="0" cellpadding="0" style="border:'+r*i+'px solid #fff;background:#fff">'];for(var a=0;a<o;++a){u.push("<tr>");for(var f=0;f<o;++f){u.push('<td style="width:'+r+"px;height:"+r+"px"+(n[a][f]?";background:#000":"")+'"></td>')}u.push("</tr>")}s.className="qrcode";s.innerHTML=u.join("")+"</table>";return s},generatePNG:function(e,t){t=t||{};var n=U["generate"](e,t);var r=Math.max(t.modulesize||5,.5);var i=Math.max(t.margin||4,0);var s=n.length;var o=r*(s+2*i);var u=document.createElement("canvas"),a;u.width=u.height=o;a=u.getContext("2d");if(!a)throw"canvas support is needed for PNG output";a.fillStyle="#fff";a.fillRect(0,0,o,o);a.fillStyle="#000";for(var f=0;f<s;++f){for(var l=0;l<s;++l){if(n[f][l]){a.fillRect(r*(i+l),r*(i+f),r,r)}}}return u.toDataURL()}};return U}()
